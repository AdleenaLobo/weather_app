(()=>{"use strict";const e=document.querySelector(".place"),t=document.querySelector(".condition"),n=document.querySelector(".temperature"),o=document.querySelector(".wind"),c=document.querySelector(".precip"),r=document.querySelector(".pressure"),u=document.querySelector("input"),i=document.querySelector(".search"),a=document.querySelector(".conditionImg"),l=document.querySelector(".date"),s=document.querySelector(".time"),d=document.querySelector("body"),m=document.querySelector(".farenheit"),p=document.querySelector(".celsius");function y(e,t){"celsius"==t||null==t?n.innerHTML=`${e.current.temp_c} <sup>o</sup>C`:"farenheit"==t&&(n.innerHTML=`${e.current.temp_f} <sup>o</sup>F`)}let f,g,S,w;function q(){g=localStorage.getItem("tempStored"),console.log(g)}async function k(n){try{const u=await fetch(`https://api.weatherapi.com/v1/current.json?key=88dd8521b0244edeac3154324230811&q=${n}`,{mode:"cors"});await u.ok?(S=await u.json(),console.log(S)):console.log("error"),function(t){e.textContent=t.location.region}(await S),function(e){t.textContent=e.current.condition.text}(await S),y(await S,g),function(e){o.textContent=e.current.wind_kph+" kph"}(await S),function(e){c.textContent=e.current.precip_mm+" mm"}(await S),function(e){r.textContent=e.current.pressure_mb+" mb"}(await S),function(e){a.src="https:"+e.current.condition.icon}(await S),function(e){f=e.location.localtime,f=f.split(" "),l.textContent="date: "+f[0]+" ,",s.textContent=" time: "+f[1],console.log(f)}(await S),function(e){"1000"==e.current.condition.code||"1030"==e.current.condition.code?d.style.backgroundImage="url(../assets/clear.jpg)":"1003"==e.current.condition.code||"1006"==e.current.condition.code?d.style.backgroundImage="url(../assets/cloudy.jpg)":d.style.backgroundImage="url(../assets/snowrain.jpg)"}(await S)}catch(e){console.log("error: "+e)}}function h(){w=u.value,w=w.toLowerCase(),k(w)}q(),p.addEventListener("click",(function(){localStorage.setItem("tempStored","celsius"),q(),y(S)})),m.addEventListener("click",(function(){localStorage.setItem("tempStored","farenheit"),q(),y(S,g)})),u.addEventListener("keypress",(function(e){"Enter"===e.key&&h()})),i.addEventListener("click",h),k("london")})();